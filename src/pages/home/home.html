<ion-header (click)="showTip=false" class="header-home">
  <ion-title>
    <button class="btn-schedule" ion-button secondary *ngIf="products && products.length > 0 && location.zone.open" (click)="openSchedule()">
      <span class="icon-opened"></span>
      <label>Estamos atendendo</label>
      <span class="icon-dropdown"></span>
    </button>
    <button class="btn-schedule closed" ion-button secondary (click)="openSchedule()" *ngIf="products.length >0 && !location.zone.open">
      <label>Ver Horários</label>
      <span class="icon-dropdown"></span>
    </button>
  </ion-title>
  <button class="btn-login" (click)="openProfile()"></button>
  <button class="btn-user" (click)="openProfile()"></button>
  <button class="btn-voucher" ion-button secondary *ngIf="products.length >0" (click)="openModalVoucher()">
    <span class="icon-voucher"></span>
  </button>
</ion-header>

<ion-content class="background-light center" [ngClass]="closed ? 'closed': '' " (click)="showTip=false">
  <button ion-button secondary (click)="openStatus()" class="order-status-bar" *ngIf="loadedcompleted && this.openSale && !err">

    <span class="order-status-bar__label" *ngIf="!actions.review && !actions.accepted && !actions.finishedAt && !actions.onWay">
      <span class="icon-loading"></span>
      <label>Aguardando confirmação</label>
    </span>

    <span class="order-status-bar__label active" *ngIf="!actions.review && !actions.onWay && actions.accepted">
      <span class="icon-check"></span>
      <label>Pedido confirmado</label>
    </span>

    <span class="order-status-bar__label delivery active" *ngIf="!actions.review && actions.onWay && !actions.finishedAt">
      <figure class="order-status-bar__image">
        <img src="https://cerveja.me/img/mobile/driver/{{actions.onWay.photo}}" alt="">
      </figure>
      <label> {{actions.onWay.name}} saiu para entrega</label>
    </span>

    <span class="order-status-bar__label active" *ngIf="actions.review">
      <span class="icon-check"></span>
      <label>Pedido entregue - Avalie</label>
    </span>
  </button>

  <h1>Cervejas</h1>

  <ion-slides [initialSlide]="0" [centeredSlides]="true" [loop]="false" [slidesPerView]=1.3 [spaceBetween]=10 pager class="choose-slider"
    (ionSlideDidChange)="slideChanged()" [ngClass]="!taped ? 'on-slide': '' " (ionSlideDrag)="onTaped()" hideWhen="!(products.length >0 && !err)">
    <ion-slide *ngFor="let prod of products;let i = index">
      <div *ngIf="prod && prod.cold">
        <p class="product__bottom">
          <span class="product__labels">
            <span class="product__cold" *ngIf="prod.cold">
              <span class="icon-cold"></span>Gelada!</span>
          </span>
          <figure class="product__picture">
            <img src="https://cerveja.me/img/mobile/{{prod.img}}" alt="">
          </figure>
        </p>
      </div>
      <div *ngIf="!prod.cold">

        <p class="product__bottom">
          <span class="product__labels">
            <span class="product__natura" *ngIf="!prod.cold">
              <span class="icon-termo"></span>Natural</span>
            <span class="product__size">{{prod.name}}</span>
          </span>
          <figure class="product__picture">
            <img src="https://cerveja.me/img/mobile/{{prod.img}}" alt="">
          </figure>
        </p>
      </div>

      <div class="table" [ngClass]="loadedcompleted && (err==='USER_DENIED_GEOLOCATION' || err==='NO_ZONE_AVAILABLE' || err=='GEOLOCATION_TIMEOUT') ? 'table-bottom': ''"></div>

      <div class="product__info">
        <span class="product__amount">Caixa com 12</span>
        <span class="product__price">R$
          <strong>38</strong>
          <small>,99</small>
        </span>
        <span class="product__price-each">{{prod.volume}}ml • R$ 5,99</span>
      </div>

      <button class="btn-add" (click)="addToIceBox(prod,i)">
        <label>Adicionar </label>
        <span class="icon-plus"></span>
      </button>

      <button class="btn-minus" (click)="removeFromIceBox(prod,i)" [ngClass]="changingSlide || !prod.items ? 'dragging': '' "></button>
    </ion-slide>
  </ion-slides>


  <h2>Outros Produtos</h2>

  <ul padding class="other-products">
    <li class="other-products__item">
      <div class="other-products__info">
        <span class="other-products__name">Carvão</span>
        <span class="other-products__price">R$
          <strong>50</strong>,00</span>
      </div>
      <button class="btn-plus"></button>
      <button class="btn-minus"></button>
    </li>
    <li class="other-products__item">
      <div class="other-products__info">
        <span class="other-products__name">Cigarro</span>
        <span class="other-products__price">R$
          <strong>10</strong>,00</span>
      </div>
      <button class="btn-plus"></button>
      <!-- <button class="btn-minus"></button> -->
    </li>
    <li class="other-products__item">
      <div class="other-products__info">
        <span class="other-products__name">Gelo</span>
        <span class="other-products__price">R$
          <strong>12</strong>,00</span>
      </div>
      <button class="btn-plus"></button>
      <!-- <button class="btn-minus"></button> -->
    </li>
  </ul>

</ion-content>

<ion-footer *ngIf="iceBox && iceBox.length " align-title="left" (click)="showTip=false">
  <div padding class="baldinho">
    <span class="baldinho__itens">{{iceBoxTotal}} Caixa de Brahma</span>
    <span class="baldinho__value">
      <strong>R$ {{iceBoxPrice}}</strong>
    </span>
    <button ion-button class="btn-next" (click)="confirmSale()">Prosseguir</button>
  </div>
</ion-footer>
